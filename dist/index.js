require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var a=e[n]=new t.Module;r[n][0].call(a.exports,i,a,a.exports)}return e[n].exports}function o(){this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({5:[function(require,module,exports) {
const e="svg {\n  font: 300 14px 'Helvetica Neue', Helvetica;\n  margin: 0;\n  padding: 0;\n}\n\n.final .outer,\n.choice,\n.state {\n  stroke: #333;\n  fill: #fff;\n}\n\n.edgePath path {\n  stroke: #333;\n  fill: #333;\n}\n\n.initial circle,\n.final .inner {\n  fill: #333;\n}\n\n.final .label,\n.initial .label {\n  transform: translate(30px, 0);\n  font-weight: bolder;\n}\n\n.label .state-name {\n  border-bottom: 1px solid #333;\n  margin-bottom: 3px;\n  text-align: center;\n  font-weight: bolder;\n}\n";module.exports=n;function n(n){n.setAttribute("xlink","http://www.w3.org/1999/xlink"),l(e,n);var t=(new XMLSerializer).serializeToString(n);return t=(t=(t=t.replace(/(\w+)?:?xlink=/g,"xmlns:xlink=")).replace(/NS\d+:href/g,"xlink:href")).replace(new RegExp(document.location.href,"g"),"")}function t(e){var n=[];n.push("#"+e.id);for(var t=0;t<e.classList.length;t++)r("."+e.classList[t],n)||n.push("."+e.classList[t]);for(var l=e.getElementsByTagName("*"),i=0;i<l.length;i++){var s=l[i].id;r("#"+s,n)||n.push("#"+s);var a=l[i].classList;for(t=0;t<a.length;t++)r("."+a[t],n)||n.push("."+a[t])}var o="";for(i=0;i<document.styleSheets.length;i++){var c=document.styleSheets[i];try{if(!c.cssRules)continue}catch(e){if("SecurityError"!==e.name)throw e;continue}for(var f=c.cssRules,u=0;u<f.length;u++)r(f[u].selectorText,n)&&(o+=f[u].cssText)}return o}function r(e,n){return-1!==n.indexOf(e)}function l(e,n){var t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;var r=n.hasChildNodes()?n.children[0]:null;n.insertBefore(t,r)}
},{}],6:[function(require,module,exports) {
module.exports=e;function e(e,t,a,n,o){var c="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e))),d=document.createElement("canvas"),r=d.getContext("2d");d.width=t,d.height=a;var m=new Image;m.onload=function(){r.clearRect(0,0,t,a),r.drawImage(m,0,0,t,a),d.toBlob(function(e){var t=Math.round(e.length/1024)+" KB";o&&o(e,t)})},m.src=c}
},{}],3:[function(require,module,exports) {
const e=require("./utils/svg"),o=require("./utils/png"),t=(t,d,n)=>{var g=e(t.node());o(g,2*d,2*n,"png",s)},d=o=>s(o)(e(d3.select("svg").node())),s=e=>(o,t)=>{fetch(e,{method:"POST",body:o}).then(()=>void 0).catch(e=>void 0)};module.exports={png:t,svg:d};
},{"./utils/svg":5,"./utils/png":6}],8:[function(require,module,exports) {
module.exports=function(n,t,e){const o=[{x:0,y:-10},{x:-10,y:0},{x:0,y:10},{x:10,y:0}],r=n.insert("polygon",":first-child").attr("points",o.map(function(n){return n.x+","+n.y}).join(" ")).classed("choice",!0);return e.intersect=function(n){return dagreD3.intersect.polygon(e,o,n)},r};
},{}],9:[function(require,module,exports) {
module.exports=function(t,r,e){const i=t.insert("circle",":first-child").attr("x",-r.width/2).attr("y",-r.height/2).attr("r",15).classed("outer",!0);return t.append("circle").attr("x",-r.width/2).attr("y",-r.height/2).attr("r",10).classed("inner",!0),t.classed("final",!0),e.intersect=function(t){return dagreD3.intersect.circle(e,15,t)},i};
},{}],10:[function(require,module,exports) {
module.exports=function(t,r,e){const i=t.insert("circle",":first-child").attr("x",-r.width/2).attr("y",-r.height/2).attr("r",15);return t.classed("initial",!0),e.intersect=function(t){return dagreD3.intersect.circle(e,15,t)},i};
},{}],11:[function(require,module,exports) {
module.exports=function(t,r,e){const i=t.insert("rect",":first-child").attr("rx",5).attr("ry",5).attr("x",-r.width/2).attr("y",-r.height/2).attr("width",r.width).attr("height",r.height).classed("state",!0);return e.intersect=function(t){return dagreD3.intersect.rect(e,t)},i};
},{}],7:[function(require,module,exports) {
module.exports={scalingFactor:t};function t(t,h){const r=t.graph().height,a=h.attr("height"),i=r>a?a/(r+20):1,n=t.graph().width,e=h.attr("width"),g=n>e?e/(n+20):1;return Math.min(g,i)}
},{}],4:[function(require,module,exports) {
const e=require("./shapes/choice"),t=require("./shapes/final"),a=require("./shapes/initial"),i=require("./shapes/state"),{scalingFactor:s}=require("./tools");module.exports=r;function r({fsm:r,meta:o}){const n=(new dagreD3.graphlib.Graph).setGraph({});r.initial&&n.setNode(r.initial,{shape:"initial",label:r.initial}),r.final.forEach(e=>{n.setNode(e,{shape:"final",label:e})}),r.states.forEach(e=>{const t=e.activities.entry.sort().map(e=>`<div>entry/${e}</div>`).join(""),a=e.activities.entered.sort().map(e=>`<div>entry/${e}</div>`).join(""),i=e.activities.do.sort().map(e=>`<div>do/${e}</div>`).join(""),s=e.activities.exit.sort().map(e=>`<div>exit/${e}</div>`).join("");n.setNode(e.name,{shape:"state",labelType:"html",label:`<div class="state-name">${e.name}</div><div class="state-activities">${t}${a}${i}${s}</div>`})}),r.choices.forEach(e=>{n.setNode(e,{shape:"choice",label:""})}),r.events.forEach(e=>{Array.isArray(e.from)?e.from.forEach(t=>{n.setEdge(t,e.to,{label:e.label,arrowhead:"vee"})}):n.setEdge(e.from,e.to,{label:e.label,arrowhead:"vee"})});const l=d3.select("svg"),h=l.select("g"),d=d3.zoom().on("zoom",function(){h.attr("transform",d3.event.transform)});l.call(d),l.attr("height",window.innerHeight-5),l.attr("width",window.innerWidth-5);const c=new dagreD3.render;c.shapes().initial=a,c.shapes().final=t,c.shapes().state=i,c.shapes().choice=e,c(h,n);const p=s(n,l),v=(l.attr("width")-n.graph().width*p)/2,m=(l.attr("height")-n.graph().height*p)/2;l.call(d.transform,d3.zoomIdentity.translate(v,m).scale(p))}
},{"./shapes/choice":8,"./shapes/final":9,"./shapes/initial":10,"./shapes/state":11,"./tools":7}],2:[function(require,module,exports) {
module.exports=function(){const t=d3.select("svg");t.attr("height",window.innerHeight-5),t.attr("width",window.innerWidth-5)};
},{}],1:[function(require,module,exports) {
window.extension={export:require("./export"),renderer:require("./renderer"),resize:require("./tools/resize")};
},{"./export":3,"./renderer":4,"./tools/resize":2}]},{},[1])